

From: Christian Prochaska <christian.prochaska@genode-labs.com>


---
 gdb/configure             |   10 +++++-----
 missing                   |    2 +-
 sim/common/Make-common.in |    2 +-
 3 files changed, 7 insertions(+), 7 deletions(-)

diff --git a/gdb/configure b/gdb/configure
index 5ac0a23..9eefa01 100755
--- a/gdb/configure
+++ b/gdb/configure
@@ -5063,11 +5063,11 @@ fi
 # configuration.
 gdb_host_obs=posix-hdep.o
 
-if test "${target}" = "${host}"; then
-  gdb_native=yes
-else
+#if test "${target}" = "${host}"; then
+#  gdb_native=yes
+#else
   gdb_native=no
-fi
+#fi
 
 . $srcdir/configure.host
 
@@ -10477,7 +10477,7 @@ sigjmp_buf env; while (! sigsetjmp (env, 1)) siglongjmp (env, 1);
   return 0;
 }
 _ACEOF
-if ac_fn_c_try_compile "$LINENO"; then :
+if ac_fn_c_try_link "$LINENO"; then :
   gdb_cv_func_sigsetjmp=yes
 else
   gdb_cv_func_sigsetjmp=no
diff --git a/missing b/missing
index 28055d2..031956f 100755
--- a/missing
+++ b/missing
@@ -314,7 +314,7 @@ WARNING: \`$1' is $msg.  You should only need it if
     fi
     # If the file does not exist, the user really needs makeinfo;
     # let's fail without touching anything.
-    test -f $file || exit 1
+    #test -f $file || exit 1
     touch $file
     ;;
 
diff --git a/sim/common/Make-common.in b/sim/common/Make-common.in
index af73c30..e089281 100644
--- a/sim/common/Make-common.in
+++ b/sim/common/Make-common.in
@@ -248,7 +248,7 @@ CSEARCH = -I. -I$(srcdir) -I../common -I$(srccom) \
   -I../../bfd -I$(srcroot)/bfd \
   -I../../opcodes -I$(srcroot)/opcodes \
   @INCINTL@
-ALL_CFLAGS = $(CONFIG_CFLAGS) $(CSEARCH) $(CFLAGS)
+ALL_CFLAGS = $(CONFIG_CFLAGS) $(CSEARCH) $(CPPFLAGS) $(CFLAGS)
 BUILD_CFLAGS = -g -O $(CSEARCH)
 
 COMMON_DEP_CFLAGS = $(CONFIG_CFLAGS) $(CSEARCH)

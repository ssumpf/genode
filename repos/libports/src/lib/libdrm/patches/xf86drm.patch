diff --git a/src/lib/libdrm/xf86drm.c b/src/lib/libdrm/xf86drm.c
index edfeb34..958f73e 100644
--- a/src/lib/libdrm/xf86drm.c
+++ b/src/lib/libdrm/xf86drm.c
@@ -4060,6 +4060,10 @@ drm_device_has_rdev(drmDevicePtr device, dev_t find_rdev)
  */
 #define MAX_DRM_NODES 256
 
+#ifdef __GENODE__
+int genode_drmGetPciDevice(int fd, uint32_t flags, drmDevicePtr device);
+#endif
+
 /**
  * Get information about the opened drm device
  *
@@ -4124,6 +4128,28 @@ drm_public int drmGetDevice2(int fd, uint32_t flags, drmDevicePtr *device)
 
     *device = d;
 
+    return 0;
+#elif defined(__GENODE__)
+    /* PCI only */
+    int           node_type = DRM_NODE_PRIMARY;
+    char const *  node      = "genode";
+    char *addr;
+    int   ret;
+
+    drmDevicePtr dev = drmDeviceAlloc(node_type, node, sizeof(drmPciBusInfo),
+                                      sizeof(drmPciDeviceInfo), &addr);
+    if (!dev) return -ENOMEM;
+
+    dev->bustype     = DRM_BUS_PCI;
+    dev->businfo.pci = (drmPciBusInfoPtr)addr;
+
+    addr += sizeof(drmPciBusInfo);
+    dev->deviceinfo.pci = (drmPciDeviceInfoPtr)addr;
+
+    if ((ret = genode_drmGetPciDevice(fd, flags, dev))) return ret;
+
+    *device = dev;
+
     return 0;
 #else
     drmDevicePtr local_devices[MAX_DRM_NODES];
